<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Sets</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="page-home">

  <header class="top-bar">
    
    <div class="profile-container">
      <button class="profile-btn" aria-label="User Menu">
        <img src="assets/user.png" alt="User" class="profile-icon" />
      </button>

      <div id="profileMenu" class="profile-menu hidden">
        <button id="logoutBtn" class="logout-button">Log Out</button>
      </div>
    </div>

    <nav class="icon-bar">
      <a class="icon-button" href="home.html" aria-label="Home">
        <i data-lucide="home" class="icon"></i>
      </a>
      <a class="icon-button active" href="sets.html" aria-label="Sets">
        <i data-lucide="file-text" class="icon"></i>
      </a>
      <a class="icon-button" href="stats.html" aria-label="Stats">
        <i data-lucide="bar-chart-2" class="icon"></i>
      </a>
    </nav>
  </header>

  <main class="sets-main">
    <h2 class="sets-title">Recent</h2>
    <button id="recentSetBtn" class="set-btn" disabled>Loading…</button>

    <h3 class="sets-subtitle">All Sets:</h3>
    
    <div id="allSets" class="sets-list">
      <p id="allSetsEmpty" class="empty-text">Loading…</p>
    </div>

    <div class="fab-row">
      <button id="addSetBtn" class="fab-btn" aria-label="Create New Set">
        <i data-lucide="plus" class="fab-plus-icon"></i>
      </button>
    </div>
  </main>

  <div id="modeOverlay" class="mode-overlay hidden" aria-hidden="true">
    <div class="mode-modal" role="dialog" aria-modal="true" aria-labelledby="modeTitle">
      <h2 id="modeTitle" class="mode-title">Start Studying</h2>
      <p id="modeDescription" class="mode-description"></p>
      
      <div class="mode-buttons">
        <button id="modeNormalBtn" class="modal-btn yellow-btn" type="button">Normal</button>
      
        <button id="modePomodoroBtn" class="modal-btn green-btn pomodoro-btn" type="button">
          Pomodoro
          <span id="pomodoroInfoBtn" class="mode-info-icon" aria-label="What is Pomodoro?">
            <i data-lucide="info" style="width:16px; height:16px;"></i>
          </span>
        </button>
        
        <button id="modeEditBtn" class="modal-btn yellow-btn" type="button">Edit Set</button>

        <button id="modeBackBtn" class="modal-btn blue-btn" type="button">Back</button>
      </div>

      <div id="pomodoroForm" class="hidden">
        <div class="mode-title" style="margin-top:10px; font-size:1.2rem;">Pomodoro Settings</div>
        <div class="pomodoro-grid">
          <label class="pomodoro-label">
            Study (min)
            <input id="workMinutes" class="pomodoro-input" type="number" min="1" max="180" value="25">
          </label>
          <label class="pomodoro-label">
            Rest (min)
            <input id="restMinutes" class="pomodoro-input" type="number" min="1" max="120" value="5">
          </label>
        </div>

        <div class="mode-buttons" style="margin-top:15px">
          <button id="pomodoroStartBtn" class="modal-btn green-btn" type="button">Start</button>
          <button id="pomodoroBackBtn"  class="modal-btn blue-btn"  type="button">Back</button>
        </div>
      </div>
    </div>
  </div>

  <div id="pomodoroInfoModal" class="audio-gate hidden" aria-hidden="true" role="dialog">
    <div class="audio-gate-box">
      <h2 class="audio-gate-title">What is Pomodoro?</h2>
      <p class="audio-gate-text">
        Pomodoro is a focus technique where you study in short, timed blocks (e.g., 25 min), followed by a short break.
      </p>
      <ul class="audio-gate-text" style="text-align:left; margin:10px auto; max-width:80%;">
        <li>Start a study timer.</li>
        <li>Auto-switch to break mode.</li>
        <li>Track recall progress.</li>
      </ul>
      <button id="pomodoroInfoClose" class="modal-btn green-btn" type="button">Got it</button>
    </div>
  </div>

  <script src="sets.js" defer></script>
  <script>
    // Initialize icons immediately
    window.addEventListener('load', () => {
      if(window.lucide) lucide.createIcons();
    });
  </script>
</body>
</html>